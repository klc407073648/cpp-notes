# 测试用例 - 功能图法

[[toc]]

# 概念

一个程序的功能说明通常由动态说明和静态说明组成.

**动态说明描述了输入数据的次序或转移的次序.静态说明描述了输入条件与输出条件之间的对应关系.**

对于较复杂的程序，由于存在大量的组合情况，因此，仅用静态说明组成的规格说明对于测试来说往往是不够的.必须用动态说明来补充功能说明.**功能图方法是用功能图FD形式化地表示程序的功能说明，并机械地生成功能图的测试用例.**

**功能图模型由状态迁移图和逻辑功能模型构成**.

- 状态迁移图用于表示输入数据序列以及相应的输出数据.在状态迁移图中，由输入数据和当前状态决定输出数据和后续状态.
- 逻辑功能模型用于表示在状态中输入条件和输出条件之间的对应关系.逻辑功能模型只适合于描述静态说明，输出数据仅由输入数据决定.测试用例则是由测试中经过的一系列状态和在每个状态中必须依靠输入/输出数据满足的一对条件组成.功能图方法其实是是一种黑盒白盒混合用例设计方法。

> 功能图方法中，要用到逻辑覆盖和路径测试的概念和方法，其属白盒测试方法中 的内容.
>
> 逻辑覆盖是以程序内部的逻辑结构为基础的测试用例设计方法.该方法要求测试人员对程序的逻辑结构有清楚的了解.
>
> 由于覆盖测试的目标不同，逻辑覆盖可分为:
>
> - 语句覆盖
> - 判定覆盖
> - 判定-条件覆盖
> - 条件组合覆盖
> - 路径覆盖

## 组成

功能图由状态迁移图和布尔函数组成.状态迁移图用状态和迁移来描述.一个状态指出数据输入的位置（或时间），而迁移则指明状态的改变.同时要依靠判定表或因果图表示的逻辑功能.

例如，下面的ATM功能图法测试

![功能图法](/_images/test/testCase/error.png)

## 设计测试用例

### 生成测试用例的规则

从功能图生成测试用例，得到的测试用例数是可接受的. 问题的关键的是如何从状态迁移图中选取测试用例. 若用节点代替状态，用弧线代替迁移，则状态迁移图就可转化成一个程序的控制流程图形式.问题就转化为程序的路径测试问题（如白盒测试）问题了.

为了把状态迁移（测试路径）的测试用例与逻辑模型（局部测试用例）的测试用例组合起来，从功能图生成实用的测试用例，须定义下面的规则.

**在一个结构化的状态迁移（SST）中，定义三种形式的循环:顺序，选择和重复.**但分辨一个状态迁移中的所有循环是有困难的.

### 步骤

- 生成局部测试用例: 在每个状态中，从因果图生成局部测试用例.局部测试用例由输入数据与对应的输出数据或状态构成。
- 测试路径生成:利用上面的规则（三种）生成从初始状态到最后状态的测试路径。
- 测试用例合成:合成测试路径与功能图中每个状态中的局部测试用例.结果是初始状态到最后状态的一个状态序列，以及每个状态中输入数据与对应输出数据的组合。

## 错误推测法

### 定义

错误推测法是: 基于经验和直觉推测程序中所有可能存在的各种错误，从而有针对性的设计测试用例的方法。

### 基本思想

根据经验，列举出程序中所有可能有的错误和容易发生错误的特殊情况，根据他们选择测试用例。

### 使用场景

适用于项目时间比较短促，任务比较繁重的情况下