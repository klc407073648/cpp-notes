1. 语言选择，Java，C++,python 怎么考虑的？
从我自身经历触发，本科和研究生的专业都是测控的，会接触一些嵌入式相关的内容，例如单片机等，主要使用C语言开发程序，然后后来研究生阶段做的项目也是跟C++
相关的，接触了qt和windows上的C++编程实践。课余时间，自学过Java便于做一些微服务相关的实践，python做一些自动化测试。

2. C++指针和内存泄漏的理解？
   1. 参数传递，使用值传递可能数据块比较大，用指针传递地址课余提高传输速度，节省内存。
   2. 复杂数据结构的实现，例如，链表、图、树结构都会用到指针来实现
   3. C++更接近底层汇编语言，直接操作内存地址。
   4. 函数指针的编写和调用
   
   内存泄漏
   根因：动态申请的资源没有释放。
   产生原因：
   1. malloc/new申请的内存没有主动释放
   2. 错误地使用：malloc/free以及new/delete成对出现
   3. 基类的析构函数没有定义为虚函数
   解决方法：
   1. 采用RAII机制，通过构造获取资源和析构函数释放资源
   2. 使用智能指针方式
   3. 注意拷贝构造函数的默认浅拷贝，导致析构两次

3. 智能指针最好的思想？有没有实现过shared_ptr和unique_ptr
   1. 智能指针使用RAII机制对指针进行封装。
   2. 实现时的一些需要考虑的点
		对于构造函数，仿照了shared_ptr的源代码，加入了explicit关键字，防止原始指针隐式的转化为智能指针。
		传入空指针或者使用默认构造函数时，引用计数为0。
		拷贝赋值函数需要检查自赋值的情况。
		释放动态内存时,时刻注意两个指针是不是空指针。
      my_share_ptr_correct.cpp
	  https://blog.csdn.net/zsiming/article/details/125542007
4. TCP/IP你说一下吧？HTTP这样的典型的request和response的方式更符合人的习惯，那为什么还需要TCP这样的连接呢？
   你觉得现在让你来设计一下TCP这个协议，你觉得不足在哪里，你会怎样做呢？
	1. TCP/IP（Transmission Control Protocol/Internet Protocol，传输控制协议/网际协议）是指能够在多个不同网络间实现信息传输的协议簇。
	TCP/IP协议不仅仅指的是TCP 和IP两个协议，而是指一个由FTP、SMTP、TCP、UDP、IP等协议构成的协议簇， 
	只是因为在TCP/IP协议中TCP协议和IP协议最具代表性，所以被称为TCP/IP协议。
	2. 使用tcp建立网络连接，然后再去发送HTTP request和接收响应HTTP response.(保持TCP连接，以持续保证客户端和服务端之间消息通信)
	
	存在的问题：
	1. 升级 TCP 的工作很困难；
	   依赖内核实现，应用程序只能使用不能修改
	2. TCP 建立连接的延迟；
	   TCP三次握手时间  + TLS 四次握手的时间； TCP Fast Open
	3. TCP 存在队头阻塞问题；
	   HTTP2采用单TCP连接，超时重传效率反而不如HTTP1.1，可以采用配置开启多连接方式
	4. 网络迁移需要重新建立 TCP 连接；
	   四元组（源 IP、源端口、目的 IP、目的端口）确定一条 TCP 连接；如果移动网切换到WIFI，必然需要重新创建TCP连接
	   HTTP3 在移动端性能强，是因为QUIC 是通过 ID 识别连接
5. HTTP，服务端是不知道何时发送完毕的，那么怎么判断接收已经完成了呢？
    客户端回响应给服务端 ，包括接收数据的长度等信息，服务端进行校验，或者多包情况，会有lastpack=1标志
6. new、malloc啥区别
   1. 是否需要指定内存大小
   2. 是否调用构造函数/析构函数
   3. 对数组的处理 
   4. new与malloc是否可以相互调用 
   5. 是否可以被重载 
   6. 能够直观地重新分配内存 
   7. 客户处理内存分配不足 
   8. 申请的内存所在位置
   9. 返回类型安全性
7. 一个子类继承了多个基类呢，里面会有多少个虚表？
   含有虚函数的基类有多少个，派生类就有多少个虚函数表指针，派生类有就有多少个虚函数表。

https://www.nowcoder.com/discuss/994160


二：

3.什么是Reactor？Reactor和Proactor的区别，为什么用Reactor? 同步和异步IO的区别。
4.epoll怎么判断数据读取完毕？
   TCP和UDP都适用。将socket设成NONBLOCK（使用fcntl函数），然后select到该socket可读之后，使用read/recv来读取数据。
   当函数返回-1，同时errno是EAGAIN(again)或EWOULDBLOCK的时候，表示数据已经全部读取完毕。
      EWOULDBLOCK用于非阻塞模式，不需要重新读或者写
  
7.TCP 和 UDP的区别？ 面向连接的连接的含义？
	含义:通信双方在通信时,要事先建立一条通信线路
8. private 有多态吗？ 引用有多态吗？ 
   private有多态
   1. 私有继承的虚函数, 其访问权限可由派生类指定.
   2. 私有继承后, 无法在派生类作用域外进行多态, 派生类指针无法自动转换为基类指针(但可强制类型转换).
   3. 当派生类将基类中public权限的虚函数重载并限制为private或protected时, 多态时直接使用基类指针将忽略派生类对该虚函数访问权限的更改，以基类函数的访问权限为依据调用该虚函数.
   
   引用有多态：
   由于引用类似于常量，只能在定义的同时初始化，并且以后也要从一而终，不能再引用其他数据。
   从运行结果可以看出，当基类的引用指代基类对象时，调用的是基类的成员，而指代派生类对象时，调用的是派生类的成员。
   不过引用不像指针灵活，指针可以随时改变指向，而引用只能指代固定的对象，在多态性方面缺乏表现力。
   https://blog.csdn.net/w_weixiaotao/article/details/108527970
   
9. web 服务器的作用？服务器的处理流程？
   Web服务器一般指网站服务器，是指驻留于因特网上某种类型计算机的程序，可以处理浏览器等Web客户端的请求并返回相应响应，也可以放置网站文件，让全世界浏览；
   可以放置数据文件，让全世界下载。最主流的三个Web服务器是Apache、 Nginx 、IIS。
   
   处理流程：
    1、用户在浏览器中输入要访问的web站点地址或在已打开的站点点击超链接。
	2、由dns进行域名解析，找到服务器的IP地址，向该地址指向的web服务器发出请求。
	3、web服务器根据请求将URL地址转换为页面所在的服务器上的文件全名，查找相应的文件。
	4、若URL指向静态文件，则服务器将文件通过http协议传输给用户浏览器；若HTML文档中嵌入了ASP,PHP,JSP等程序，则由服务器直接运行后返回给用户；
	如果web服务器所运行程序包含对数据库的访问，服务器会将查询指令发送给数据库服务器，对数据库执行查询操作，查询结果由数据库返回给web服务器，
	再由web服务器将结果嵌入页面，并以html格式发送给浏览器。
	5、浏览器解释html文档，在客户端屏幕上展示结果。
	
	总结：用户通过浏览器，输入网址通过DNS解析向指定ip的web服务器发送请求，web服务器根据请求的Url,将对应资源进行解析(可能是静态页面，可能是动态数据，涉及后端数据库操作)，
	web服务器将请求url的结果嵌入html，以html格式返回给浏览器，浏览器在进行解析。

10. 日志系统的实现，为什么采用两块缓冲区，而不是把缓冲区的大小扩大。好处是什么。
   双写缓冲区：因为写日志操作很快，写文件操作较慢。
   第一个缓冲区，接收应用程序高速写日志请求
   第二缓冲区，向磁盘写日志，并在写入后交换缓冲区指针
   特点： 两个缓冲区各自处理，互不干扰；通过交换指针的方式实现两个缓冲区的功能互换
11. 日志来不及写，怎么处理。
    针对双写缓冲区，日志太快，写日志请求的日志写满了，但是写文件的缓冲区还没写完，没办法交互缓冲区
	解决方法：
	多块当前缓冲区 + 多块备用缓冲区，程序动态调整当前缓存区和备用缓冲区的数量。
	https://blog.csdn.net/wwh578867817/article/details/47413977
	
12. 线程池的处理逻辑，怎么判断一个线程挂掉，怎么实现负载均衡。
    1. 创建指定数量的线程数，对应线程处理函数就会 “循环” 等待任务队列里的任务；
	2. 当addTask函数执行时，触发条件变量，使得获取到当前需要执行的任务，去执行；
	
	负载均衡实际上就是，采用轮询策略
	线程挂掉判断： 挂掉前打印堆栈信息
	Java和C++对于多线程里面的一个线程抛出异常的影响，完全不同。
	Java里面，对于主线程和其他线程完全不受影响；
	C++里面，整个程序会退出，所有线程都会受影响。需要在传递给线程的函数里加上try catch保护
	
14.怎么处理失效和过期的请求。
   以微信申请好友为例，如果过期的好友验证请求，不会直接有  "通过" 按钮，一般有 "回复" 按键，输入信息后，反向发送好友申请。

15.如果没有空闲的工作线程，新到的请求怎么办？
   线程池就是维护指定数量的线程 和任务队列的方式，将请求先加入任务队列，然后有空闲线性时，会主动来取任务队列里的请求
16.怎么处理下载请求。下载的数据大小都不一致。怎么支持浏览器。
   前端html的下载连接：
   <a href="./image/portfolio1.zip" target="_blank">download file:portfolio1</a>   //浏览器不支持的格式自动下载为文件
   <a href="./image/portfolio1.jpg" target="_blank">download file:portfolio1</a>   //浏览器支持的格式(pdf,jpg)会提供预览功能
   
三、

1. 多态的实现，虚表及指向虚表指针的存储，类中指向虚表指针的个数，基类指针与子类指针指向同一对象值是否相等，指向虚表的指针是什么完成初始化的？

虚函数指针：含在虚函数类的对象中，指向虚函数表，在运行时确定。 
虚函数表：属于类的，不属于类对象。在编译的时候确定，存放在只读数据段。
相等，当构造函数中完成初始化

2. 基类指针和子类指针的转换问题，是否了解static_cast及dynamic_cast的底层原理

static_cast <type-id> ( expression )：该运算符把expression转换为type-id类型，但没有**运行时类型检查**来保证转换的安全性。
dynamic_cast <type-id> (expression)：将一个基类对象指针（或引用）cast到继承类指针，dynamic_cast会根据基类指针是否真正指向继承类指针来做相应处理，
如果 downcast 不安全，这个运算符会传回空指针。

RTTI 是 Run Time Type Information 的缩写，从字面上来理解就是执行时期的类型信息，其重要作用就是动态判别执行时期的类型。

RTTI的实现原理: 通过在虚表中放一个额外的指针，每个新类只产生一个typeinfo实例，额外指针指向typeinfo, typeid返回对它的一个引用。

static_cast实现原理: 不做运行时的类型检查(RTTI,Run-time type identification),类似于C语言的强制转换。
dynamic_cast实现原理: 先恢复源指针的RTTI信息，再取目标的RTTT信息，比较两者是否相同，不同取目标类型的基类; 由于它需要检查一长串基类列表，故动态映射的开销比typeid大。

3. 类继承时，成员变量和vptr是怎么存储的(好像是问存储顺序)？

先分配虚表指针，然后再给成员变量分配的空间

4. 如何区别大端机和小端机？

union
    {
        char str;
        int data;
    };
     data=0x01020304;
     if(str==0x01)
     {
         cout<< "此机器是大端！"<<endl;
     }
     else if(str==0x04){
         cout<<"此机器是小端！"<<endl;
     }
     else{
         cout <<" 暂无法判断此机器类型！"<<endl;
     }

5. STL用过么，讲一下vector，如何扩张？拷贝构造函数和移动构造函数如何选择？

1.5-2倍

不同的编译器实现的扩容方式不一样，VS2019中以1.5倍扩容，GCC以2倍扩容。

  为什么要成倍的扩容而不是一次增加一个固定大小的容量呢？
  —— 采用成倍方式扩容，可以保证vector 中 push_back操作为常数的时间复杂度，而增加指定大小的容量只能达到O(n)的时间复杂度，因此使用成倍的方式扩容。
  为什么是以2倍或1.5倍的方式扩容而不是其他倍数呢？
  —— 使用2倍（k=2）扩容机制扩容时，每次扩容后的新内存大小必定大于前面的总和。
     而使用1.5倍（k=1.5)扩容时，在几次扩展以后，可以重用之前的内存空间了。

push_back()右值时就会调用构造函数和转移构造函数。进一步优化的空间就是使用
emplace_back，在容器尾部添加一个元素，这个元素原地构造，不需要触发拷贝构造和转移构造

6. map用过么？红黑树是绝对平衡二叉树么？什么情况下插入复杂度最坏？

7. 不用虚函数如何实现多态？

no-virtual-poly.cpp

```
int main()
{
    Base *b;//基类指针
    Derived d;//派生类对象
    Base bb;//基类对象
    //指向基类对象时调用基类test，指向派生类对象时调用派生类test,模拟了动态关联
    b = &d;
    cout << b->test() << endl;
    b = &bb;
    cout << b->test() << endl;
    return 0;
}
```

8. C++如何禁止一个类被继承？

拷贝构造和赋值构造函数定义为private，或者 =delete， 可以用final 关键字

9. 线程的通信方式，同步方式，为什么要进行同步？系统是如何给线程分配一个栈的？

代码：实现一个字符串类； 删除vector中重复的元素(双指针)


智能指针的实现

const用法，define用法，适用场景及缺点

C++11 新特性，模板的基本知识

代码：将一个vector中的所有奇数放前面，所有偶数放后面？（双指针即可）

C++有没有相应的库可以完成上面的操作(STL中的partition 或者sort+lambda都行)

实现字符串类（怎么总是考这个？）不过和第一次不一样，要写出移动构造函数，重载赋值运算符（两个，一个参数是对象，一个是右值引用）

四、

1. 如何用 gdb 调试代码

2. 检测内存泄漏的软件

3. 智能指针

4. C++ 多态讲一下

5. 纯虚函数，使用场景，虚函数和纯虚函数有什么区别

纯虚函数的目的:使派生类仅仅只是继承函数的接口,必须自己实现。带有纯虚函数的类为抽象类。

   1. 虚函数和纯虚函数可以定义在同一个类(class)中，含有纯虚函数的类被称为抽象类(abstract class)，而只含有虚函数的类(class)不能被称为抽象类(abstract class)。

   2. 虚函数可以被直接使用，也可以被子类(sub class)重载以后以多态的形式调用，而纯虚函数必须在子类(sub class)中实现该函数才可以使用，因为纯虚函数在基类(base class)只有声明而没有定义。

   3. 虚函数和纯虚函数都可以在子类(sub class)中被重载，以多态的形式被调用。

   4. 虚函数和纯虚函数通常存在于抽象基类(abstract base class -ABC)之中，被继承的子类重载，目的是提供一个统一的接口。

   5. 虚函数的定义形式：virtual {method body}
   　　纯虚函数的定义形式：virtual { } = 0;

   在虚函数和纯虚函数的定义中不能有static标识符，原因很简单，被static修饰的函数在编译时候要求前期bind,然而虚函数却是动态绑定(run-time bind)，而且被两者修饰的函数生命周期(life recycle)也不一样。

   6. 虚函数必须实现，如果不实现，编译器将报错。

   7. 对于虚函数来说，父类和子类都有各自的版本。由多态方式调用的时候动态绑定。

   8. 实现了纯虚函数的子类，该纯虚函数在子类中就编程了虚函数，子类的子类即孙子类可以覆盖。该虚函数，由多态方式调用的时候动态绑定。

   9. 虚函数是C++中用于实现多态(polymorphism)的机制。核心理念就是通过基类访问派生类定义的函数

   10. 多态性指相同对象收到不同消息或不同对象收到相同消息时产生不同的实现动作。C++支持两种多态性：编译时多态性，运行时多态性。
         a.编译时多态性：通过重载函数实现
         b 运行时多态性：通过虚函数实现。

   11. 如果一个类中含有纯虚函数，那么任何试图对该类进行实例化的语句都将导致错误的产生，因为抽象基类(ABC)是不能被直接调用的。必须被子类继承重载以后，根据要求调用其子类的方法。

6. 申请十个 char 的堆空间，并且释放

char* p = new char[10];
delete [] p;


有一个类 students，名字和学号，生成 50 个实例，保存在一个类里面。排序怎么排列？排序，重载。年龄20岁的删除。

给了几个程序，判断能不能输出hello world！
设计模式

写一个单例模式

工厂模式，为什么要工厂模式？

汇编语言
C++11 新加的语法
lambada表达式
Linux shell 脚本
念英语文章
遇到困难是怎么解决？
