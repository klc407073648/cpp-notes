# apue学习

* 如果main函数为void类型，其终止码是随机的，一般为0.

```
#include<stdio.h>

main()
{
 printf("Hello World!\n");
}
——————————————————————————————
[root@iZuf61kbf845xt6tz10abgZ hello]# ./a.out
Hello World!
[root@iZuf61kbf845xt6tz10abgZ hello]# echo $?
0
```

* 函数atexit：用于登记终止处理程序，这些函数由exit来自动调用。ISO C规定, 一个进程最多可登记32个终止处理函数, 这些函数由exit按登记相反的顺序自动调用。
* return和exit的区别

```
1. exit用于结束正在运行的整个程序，它将参数返回给OS，把控制权交给操作系统;而return 是退出当前函数，返回函数值，把控制权交给调用函数。
2. exit是系统调用级别，它表示一个进程的结束;而return 是语言级别的，它表示调用堆栈的返回。
3. 在main函数结束时，会隐式地调用exit函数，所以一般程序执行到main()结尾时，则结束主进程。exit将删除进程使用的内存空间，同时把错误信息返回给父进程。
4. void exit(int status); 一般status为0，表示正常退出，非0表示非正常退出。

exit函数和return函数的主要区别是：

1.exit用于在程序运行的过程中随时结束程序，其参数是返回给OS的。也可以这么讲：exit函数是退出应用程序,并将应用程序的一个状态返回给OS，这个状态标识了应用程序的一些运行信息。
  main函数结束时也会隐式地调用exit函数，exit函数运行时首先会执行由atexit()函数登记的函数，然后会做一些自身的清理工作，同时刷新所有输出流、关闭所有打开的流并且关闭通过标准I/O函数tmpfile()创建的临时文件。

  exit是系统调用级别的，它表示了一个进程的结束，它将删除进程使用的内存空间，同时把错误信息返回父进程。通常情况：exit(0)表示程序正常, exit(1)和exit(-1)表示程序异常退出，exit(2)表示系统找不到指定的文件。在整个程序中，只要调用exit就结束。

2.return是语言级别的，它表示了调用堆栈的返回；return是返回函数值并退出函数，通常0为正常退出，非0为非正常退出，请注意，如果是在主函数main, 自然也就结束当前进程了（也就是说，在main()里面，你可以用return n，也能够直接用exit(n)来做），如果不是在main函数中，那就是退回上一层调用。在多个进程时，如果有时要检测上个进程是否正常退出，就要用到上个进程的返回值。
```

